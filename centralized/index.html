<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Centralized workflow &mdash; Collaborative distributed version control  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/mystnb.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_lesson.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_rtd_theme_ext_color_contrast.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/minipres.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Distributed version control and forking workflow" href="../distributed/" />
    <link rel="prev" title="Concepts around collaboration" href="../remotes/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../" class="icon icon-home"> Collaborative distributed version control
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Core episodes</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../remotes/">Concepts around collaboration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Centralized workflow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#meaning-of-central-in-a-distributed-version-control">Meaning of “central” in a distributed version control</a></li>
<li class="toctree-l2"><a class="reference internal" href="#centralized-layout">Centralized layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercise-part-1-creating-a-pull-request">Exercise: Part 1 - creating a pull request</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#clone-your-administrator-s-group-repository">1. Clone your administrator’s group repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-into-the-newly-created-directory">2. Step into the newly created directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-a-branch-yourname-somefeature-pointing-at-your-commit">3. Create a branch <code class="docutils literal notranslate"><span class="pre">yourname-somefeature</span></code> pointing at your commit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-a-file-with-a-unique-name-e-g-yourusername-txt">4. Create a file with a unique name, e.g.: <code class="docutils literal notranslate"><span class="pre">yourusername.txt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#stage-and-commit-the-change">5. Stage and commit the change</a></li>
<li class="toctree-l3"><a class="reference internal" href="#push-your-change-as-a-new-branch">6. Push your change as a new branch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#browse-the-network-of-branches-and-commits">7. Browse the network of branches and commits</a></li>
<li class="toctree-l3"><a class="reference internal" href="#submit-a-pull-request">8. Submit a pull request</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exercise-part-2-code-review-and-merging-changes">Exercise: Part 2 - code review and merging changes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#discuss-and-accept-pull-requests">9. Discuss and accept pull requests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-your-local-copy">10. Update your local copy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#optional-exercises">Optional exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../distributed/">Distributed version control and forking workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/">How to contribute changes to somebody else’s project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Optional episodes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hooks/">Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bare-repos/">Non-bare and bare repositories</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../exercises/">List of exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/">Instructor guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/">Quick reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Collaborative distributed version control</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home"></a> &raquo;</li>
      <li>Centralized workflow</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/coderefinery/git-collaborative/blob/main/content/centralized.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="centralized-workflow">
<h1>Centralized workflow<a class="headerlink" href="#centralized-workflow" title="Permalink to this headline"></a></h1>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Understand how to collaborate using a centralized workflow.</p></li>
<li><p>Understand the difference between local branch, origin/branch, and remote branch.</p></li>
</ul>
</div>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-0">
<p class="admonition-title">Instructor note</p>
<ul class="simple">
<li><p>20 min teaching</p></li>
<li><p>40 min exercises</p></li>
</ul>
</div>
<section id="meaning-of-central-in-a-distributed-version-control">
<h2>Meaning of “central” in a distributed version control<a class="headerlink" href="#meaning-of-central-in-a-distributed-version-control" title="Permalink to this headline"></a></h2>
<p>Git implements a <strong>distributed</strong> version control.
This means that any type of repository links that you can think of can be
implemented - not just “everything connects to one central server”.</p>
<p>In Git, all repositories are equivalent but we typically we consider one repository
as the main development line and this is marked as “central”.
The “central” is a role, not a technical difference.</p>
<p>In this episode, we will explore the usage of a <strong>centralized workflow</strong> for collaborating online on a project
<strong>within one repository</strong>.</p>
</section>
<section id="centralized-layout">
<h2>Centralized layout<a class="headerlink" href="#centralized-layout" title="Permalink to this headline"></a></h2>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="../_images/centralized.svg"><img alt="Centralized layout" src="../_images/centralized.svg" width="50%" /></a>
<figcaption>
<p><span class="caption-text">Centralized layout.</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Features:</p>
<ul class="simple">
<li><p>Typically all developers have both read and write permissions (double-headed arrows).</p></li>
<li><p>Suited for cases where <strong>all developers are in the same group or organization or project</strong>.</p></li>
<li><p><strong>Everybody who wants to contribute needs write access</strong>.</p></li>
<li><p>Good idea to write-protect the main branch (typically <code class="docutils literal notranslate"><span class="pre">master</span></code> or <code class="docutils literal notranslate"><span class="pre">main</span></code>).</p></li>
</ul>
<p>Real life examples:</p>
<ul class="simple">
<li><p>Within the CodeRefinery team we mostly use this approach: <a class="reference external" href="https://github.com/coderefinery">https://github.com/coderefinery</a></p></li>
<li><p><a class="reference external" href="https://github.com/ropensci/plotly">https://github.com/ropensci/plotly</a></p></li>
</ul>
</section>
<section id="exercise-part-1-creating-a-pull-request">
<h2>Exercise: Part 1 - creating a pull request<a class="headerlink" href="#exercise-part-1-creating-a-pull-request" title="Permalink to this headline"></a></h2>
<p>In this exercise we will practice collaborative centralized workflow in small
groups.  We’ll discuss how this leads to code review and discuss a number of
typical pitfalls.</p>
<div class="admonition-exercise-preparation prerequisites admonition" id="prerequisites-0">
<p class="admonition-title">Exercise preparation</p>
<ul>
<li><p>We form small groups (4-5 persons).</p></li>
<li><p>Each group needs to appoint someone who will host the shared GitHub repository: <em>an administrator</em>.</p></li>
<li><p>For online teaching, use breakout rooms.</p></li>
<li><p><strong>One person per group (administrator)</strong> generates a new repository
from the template <a class="reference external" href="https://github.com/coderefinery/template-centralized-workflow-exercise">https://github.com/coderefinery/template-centralized-workflow-exercise</a>
called <code class="docutils literal notranslate"><span class="pre">centralized-workflow-exercise</span></code> (There is no need to tick <em>“Include all branches”</em> for this exercise):</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/generate_repo.png"><img alt="Screenshot of generating the exercise repository" src="../_images/generate_repo.png" style="width: 100%;" /></a>
</figure>
</li>
<li><p>Then <strong>everyone in your group</strong> needs their GitHub account to be added as collaborator to the exercise repository:</p>
<ul class="simple">
<li><p>Participants give their GitHub usernames to their chosen administrator (in their respective group, in online workshops you can use the Zoom chat for private communication within the breakout room).</p></li>
<li><p>Administrator gives the other group members the newly created GitHub repository URL.</p></li>
<li><p>Administrator adds participants as collaborators to their project (Settings → Manage Access → Invite a collaborator).</p></li>
<li><p>Group members need to accept the invitation. GitHub emails you an invitation link, but if you don’t receive it
you can go to your GitHub notifications in the top right corner. The administrator can also “copy invite link”
and share it within the group.</p></li>
</ul>
</li>
<li><p>Watching and unwatching repositories:</p>
<ul class="simple">
<li><p>Now that you are a collaborator, you get notified about new issues and pull
requests via email.</p></li>
<li><p>If you do not wish this, you can “unwatch” a repository (top of the project page).</p></li>
<li><p>However, we recommend watching repositories you are interested in. You can learn things from experts just by
watching the activity that come through.</p></li>
</ul>
</li>
</ul>
</div>
<div class="admonition-centralized-1-clone-a-repository-add-a-file-push-changes-as-a-branch-and-create-a-pull-request exercise important admonition" id="exercise-0">
<p class="admonition-title">Centralized-1: Clone a repository, add a file, push changes as a branch, and create a pull request</p>
<ul class="simple">
<li><p>Helper prepares an exercise repository (see above) - this will take 10 minutes or so. Most of the time will
go into <strong>communicating the usernames of the exercise group</strong> and to add them as collaborators and for them to <strong>accept
the invitation</strong> to the exercise repository.</p></li>
<li><p>Before we start with the exercise, instructor mentions all steps and explains what happens during a <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code>.</p></li>
<li><p>The exercise group works on steps 1-8 (15-20 minutes).</p></li>
<li><p>After step 8 you can return to the main room. Please ask questions both during group work and in main room.</p></li>
</ul>
<p>Full exercise is below.</p>
</div>
<div class="admonition-hint-for-breakout-rooms callout admonition" id="callout-0">
<p class="admonition-title">Hint for breakout rooms</p>
<p>If the helper in the room is the one who sets up the central repository, they
cannot easily demostrate the steps via screen-sharing as the repository’s owner. A
good alternative is to have one of the learners screen-share and get advice on the
steps from other learners and helpers!</p>
</div>
<section id="clone-your-administrator-s-group-repository">
<h3>1. Clone your administrator’s group repository<a class="headerlink" href="#clone-your-administrator-s-group-repository" title="Permalink to this headline"></a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git clone &lt;repository-url&gt; centralized-workflow-exercise
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">&lt;repository-url&gt;</span></code> is the repository created by the exercise administrator.</p>
<p>This is a representation of what happens when you clone:</p>
<figure class="align-default" id="id2">
<img alt="../_images/01-remote.svg" src="../_images/01-remote.svg" /><figcaption>
<p><span class="caption-text">remote</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id3">
<img alt="../_images/01-local.svg" src="../_images/01-local.svg" /><figcaption>
<p><span class="caption-text">local</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Here and in what follows, “c1” is a commit, “b1” etc. are commits on side branches
and “m1” is a merge commit.</p>
<ul class="simple">
<li><p>We clone the entire history, all branches, all commits. In our case, we have one branch (we did not include <em>all branches</em> when creating our repository from template) and we have only one commit (<em>initial commit</em>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> creates pointers <code class="docutils literal notranslate"><span class="pre">origin/master</span></code> so you can see the branches of the origin.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">origin</span></code> refers to where we cloned from, try: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">remote</span> <span class="pre">-v</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">origin</span></code> is a shortcut for the full URL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">origin/master</span></code> is a read-only pointer.</p></li>
<li><p>They only move during <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">fetch</span></code> or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code>.</p></li>
<li><p>Only <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">fetch</span></code> or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code> require network.</p></li>
<li><p>All other operations are local operations.</p></li>
</ul>
</section>
<section id="step-into-the-newly-created-directory">
<h3>2. Step into the newly created directory<a class="headerlink" href="#step-into-the-newly-created-directory" title="Permalink to this headline"></a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span> centralized-workflow-exercise
</pre></div>
</div>
<p>Try to find out where this repository was cloned from using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">remote</span> <span class="pre">-v</span></code>.</p>
</section>
<section id="create-a-branch-yourname-somefeature-pointing-at-your-commit">
<h3>3. Create a branch <code class="docutils literal notranslate"><span class="pre">yourname-somefeature</span></code> pointing at your commit<a class="headerlink" href="#create-a-branch-yourname-somefeature-pointing-at-your-commit" title="Permalink to this headline"></a></h3>
<p>Create a branch from the current <code class="docutils literal notranslate"><span class="pre">master</span></code>. Also adapt “yourname-somefeature” to a better name:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git branch yourname-somefeature master
<span class="gp">$ </span>git checkout yourname-somefeature
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">yourname-</span></code> prefix has no special meaning here (not like <code class="docutils literal notranslate"><span class="pre">origin/</span></code>): it is just part of a
branch name to indicate who made it.</p>
</section>
<section id="create-a-file-with-a-unique-name-e-g-yourusername-txt">
<h3>4. Create a file with a unique name, e.g.: <code class="docutils literal notranslate"><span class="pre">yourusername.txt</span></code><a class="headerlink" href="#create-a-file-with-a-unique-name-e-g-yourusername-txt" title="Permalink to this headline"></a></h3>
<p>In this file share your favourite cooking recipe or haiku or Git trick or whatever.</p>
</section>
<section id="stage-and-commit-the-change">
<h3>5. Stage and commit the change<a class="headerlink" href="#stage-and-commit-the-change" title="Permalink to this headline"></a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git add yourusername.txt
<span class="gp">$ </span>git commit
</pre></div>
</div>
<figure class="align-default" id="id4">
<img alt="../_images/01-remote.svg" src="../_images/01-remote.svg" /><figcaption>
<p><span class="caption-text">remote</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id5">
<img alt="../_images/04-local.svg" src="../_images/04-local.svg" /><figcaption>
<p><span class="caption-text">local</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="push-your-change-as-a-new-branch">
<h3>6. Push your change as a new branch<a class="headerlink" href="#push-your-change-as-a-new-branch" title="Permalink to this headline"></a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git push origin -u yourname-somefeature
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Meaning of <code class="docutils literal notranslate"><span class="pre">-u</span></code> | <code class="docutils literal notranslate"><span class="pre">--set-upstream</span></code></strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">-u</span></code> or <code class="docutils literal notranslate"><span class="pre">--set-upstream</span></code> will connect the local branch with the newly created upstream/remote branch
and track it. This has the following advantages:</p>
<ul class="simple">
<li><p>If you from here on only type <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code> or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> without branchname, Git will know what branch you
refer to (depending also on your Git configuration). However, we still recommend to explicitly type where
you want to push/pull to/from and which branch explicitly.</p></li>
<li><p>When you type <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>, Git will inform you whether your local branch is ahead or behind the upstream branch
that it tracks.</p></li>
</ul>
<p>However, also without the <code class="docutils literal notranslate"><span class="pre">-u</span></code> this step and the rest of the exercise will
work. The fact that the local and remote branch are not connected is not a
problem if you explicitly type out the remote and branch name every time.</p>
</div>
</section>
<section id="browse-the-network-of-branches-and-commits">
<h3>7. Browse the network of branches and commits<a class="headerlink" href="#browse-the-network-of-branches-and-commits" title="Permalink to this headline"></a></h3>
<p>After you have pushed your branch and other participants have too, browse the
network of branches and commits (on GitHub click on Insights -&gt; Network) and
discuss with others what you see.</p>
</section>
<section id="submit-a-pull-request">
<h3>8. Submit a pull request<a class="headerlink" href="#submit-a-pull-request" title="Permalink to this headline"></a></h3>
<p>Submit a pull request from your branch towards the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch.
Do this through the web interface.</p>
<p>A pull-request means: “please review my changes and if you agree, merge them with a mouse-click”. In a popular project, it means that anyone can
contribute with <em>almost no work</em> on the maintainer’s side - a big win.</p>
</section>
</section>
<section id="exercise-part-2-code-review-and-merging-changes">
<h2>Exercise: Part 2 - code review and merging changes<a class="headerlink" href="#exercise-part-2-code-review-and-merging-changes" title="Permalink to this headline"></a></h2>
<div class="admonition-centralized-2-merge-the-pull-requests-together exercise important admonition" id="exercise-1">
<p class="admonition-title">Centralized-2: Merge the pull requests (together)</p>
<ul class="simple">
<li><p><strong>We do step 9 and 10 together</strong> (instructor demonstrates, and everybody follows along in their repositories).</p></li>
</ul>
</div>
<section id="discuss-and-accept-pull-requests">
<h3>9. Discuss and accept pull requests<a class="headerlink" href="#discuss-and-accept-pull-requests" title="Permalink to this headline"></a></h3>
<p><strong>We do this step together on the main screen (in the main room)</strong>. The instructor shows a submitted
pull request, discusses what features to look at, and how to discuss and review.</p>
<p>At the same time, helpers can review open pull requests from their exercises groups.</p>
<div class="admonition-discussion discussion attention admonition" id="discussion-0">
<p class="admonition-title">Discussion</p>
<p><strong>Naming</strong></p>
<ul class="simple">
<li><p>In GitLab or BitBucket these are named <strong>merge requests</strong>, not <strong>pull requests</strong>.</p></li>
<li><p>Which one do you feel is more appropriate and in which
context? (The name <strong>pull request</strong> may make more sense in the forking workflow: next episode).</p></li>
<li><p>It can be useful to think of them as <strong>change proposals</strong>.</p></li>
</ul>
<p><strong>Pull requests are from branch to branch</strong></p>
<ul class="simple">
<li><p>They originate from a source branch and are directed towards a branch.</p></li>
<li><p>Not from commit to branch.</p></li>
<li><p>Pull requests create new commits on the target branch.</p></li>
<li><p>They do not create new branches.</p></li>
</ul>
<p><strong>Pull requests can be used for code review</strong></p>
<ul class="simple">
<li><p>Pull requests are like change proposals.</p></li>
<li><p>We recommend that pull requests are reviewed by someone else in your group.</p></li>
<li><p>In our example everyone has write access to the “central” repository.</p></li>
</ul>
<p><strong>Code review and protected branches</strong></p>
<ul class="simple">
<li><p>A good setting is to make the <code class="docutils literal notranslate"><span class="pre">master</span></code> or <code class="docutils literal notranslate"><span class="pre">main</span></code> branch <strong>protected</strong> and all changes to it have to go
through code review.</p></li>
<li><p>Centralized workflow with protected branches is a good setup for many projects.</p></li>
</ul>
<p><strong>code review</strong></p>
<ul class="simple">
<li><p>You see what others are working on</p></li>
<li><p>Collaborative learning</p></li>
<li><p>OK if students and junior researchers review senior researchers</p></li>
<li><p>Improves quality of the code</p></li>
</ul>
<p><strong>Read more</strong></p>
<ul class="simple">
<li><p>This is a great resource: <a class="reference external" href="https://scicomp.aalto.fi/scicomp/practical-git-prs/">Practical git PRs for small teams</a></p></li>
</ul>
</div>
<p>Once the pull-request is accepted, the change is merged:</p>
<figure class="align-default" id="id6">
<img alt="../_images/06-remote.svg" src="../_images/06-remote.svg" /><figcaption>
<p><span class="caption-text">central</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id7">
<img alt="../_images/04-local.svg" src="../_images/04-local.svg" /><figcaption>
<p><span class="caption-text">local</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Finally also discuss the “network” on GitHub.</p>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-1">
<p class="admonition-title">Instructor note</p>
<p>At this stage demonstrate how to suggest small changes to pull/merge requests:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://haacked.com/archive/2019/06/03/suggested-changes/">GitHub</a></p></li>
<li><p><a class="reference external" href="https://docs.gitlab.com/ee/user/project/merge_requests/reviews/suggestions.html">GitLab</a></p></li>
</ul>
</div>
</section>
<section id="update-your-local-copy">
<h3>10. Update your local copy<a class="headerlink" href="#update-your-local-copy" title="Permalink to this headline"></a></h3>
<p>Your branch <code class="docutils literal notranslate"><span class="pre">yourname-somefeature</span></code> is not needed anymore but more importantly,
you need to sync your local copy: Everybody needs to do this step in their
exercise repository but we do this together in the main room so that we can
discuss this step and ask questions.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git checkout master
<span class="gp">$ </span>git pull origin master
</pre></div>
</div>
<figure class="align-default" id="id8">
<img alt="../_images/06-remote.svg" src="../_images/06-remote.svg" /><figcaption>
<p><span class="caption-text">central</span><a class="headerlink" href="#id8" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id9">
<img alt="../_images/07-local.svg" src="../_images/07-local.svg" /><figcaption>
<p><span class="caption-text">local</span><a class="headerlink" href="#id9" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
<section id="optional-exercises">
<h2>Optional exercises<a class="headerlink" href="#optional-exercises" title="Permalink to this headline"></a></h2>
<div class="admonition-optional-centralized-3-cross-referencing-issues-using-nnn exercise important admonition" id="exercise-2">
<p class="admonition-title">(optional) Centralized-3: Cross-referencing issues using “#NNN”</p>
<p>We will submit another change by a pull request but this time we will <strong>first create an issue</strong>.</p>
<ol class="simple">
<li><p>Open an issue on GitHub and describe your idea for a change. This gives
others the chance to give feedback/suggestions. <strong>Note the issue number</strong>, you
will need it in step 3.</p></li>
<li><p>Create a new branch and switch to it.</p></li>
<li><p>On the new branch create a commit and in the commit message write what you
did, but also add that this “closes #1” (if the issue that you refer to had the number
1).</p></li>
<li><p>Push the branch and open a new pull request. If you forgot to refer to the
issue number in step 3, you can still refer to it in the pull request
form.</p></li>
<li><p>Note how now commits, pull requests, and issues can be cross-referenced by including <code class="docutils literal notranslate"><span class="pre">#NNN</span></code>.</p></li>
<li><p>Notice how after the pull request is merged, the issue gets automatically
closed.  This only happens for certain keywords like <code class="docutils literal notranslate"><span class="pre">closes</span></code> or <code class="docutils literal notranslate"><span class="pre">fix</span></code>.</p></li>
<li><p>Discuss the value of cross-referencing them and of auto-closing issues
with commits or pull requests.</p></li>
</ol>
</div>
<div class="admonition-optional-centralized-4-why-did-we-create-a-feature-branch-yourname-somefeature-exercise-discussion exercise important admonition" id="exercise-3">
<p class="admonition-title">(optional) Centralized-4: Why did we create a feature branch “yourname-somefeature”? (exercise/discussion)</p>
<p>This exercise is done in groups of 4-5 persons and can be done through a discussion only.</p>
<p>Pushing directly to the main branch is perfectly fine for simple personal projects -
the pull-request workflows covered here are for larger projects or for collaborative development.
Guidelines for simpler workflows are given in the
<a class="reference external" href="https://coderefinery.github.io/git-intro/level/">how much git is necessary?</a> episode of the git-intro lesson.</p>
<p>In collaborative development, whenever we update our repository we create a new branch
and create a pull-request. Let’s now imagine that everyone in your group makes a new change (create a new file)
but without creating a new branch.</p>
<ol class="simple">
<li><p>You all create a new file in the master branch, stage and commit your change locally.</p></li>
<li><p>Try to push the change to the upstream repository:</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git push origin master
</pre></div>
</div>
<p>You probably see something like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git push
<span class="go">To https://github.com/user/repo.git</span>
<span class="go"> ! [rejected]        master -&gt; master (non-fast-forward)</span>
<span class="go">error: failed to push some refs to &#39;https://github.com/user/repo.git&#39;</span>
<span class="go">To prevent you from losing history, non-fast-forward updates were rejected</span>
<span class="go">Merge the remote changes (e.g. &#39;git pull&#39;) before pushing again.  See the</span>
<span class="go">&#39;Note about fast-forwards&#39; section of &#39;git push --help&#39; for details.</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The push only worked for one participant.</p></li>
<li><p>Discuss why push for everybody else in this group was rejected?</p></li>
</ul>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<p>The push for everyone except one person fails because they are missing one
commit in their local repository that exists on the remote. They will first
need to pull the remote changes before pushing their own, which will usually
result in a merge commit.</p>
</div>
</div>
<div class="admonition-discussion-how-to-make-changes-to-remote-branches discussion attention admonition" id="discussion-1">
<p class="admonition-title">Discussion: How to make changes to remote branches</p>
<p>We can create a local branch <code class="docutils literal notranslate"><span class="pre">somefeature</span></code> tracking <code class="docutils literal notranslate"><span class="pre">origin/somefeature</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git checkout -b somefeature origin/somefeature
</pre></div>
</div>
<p>If there is no local branch <code class="docutils literal notranslate"><span class="pre">somefeature</span></code> and there is a remote branch <code class="docutils literal notranslate"><span class="pre">origin/somefeature</span></code>, then this is enough:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git checkout somefeature
</pre></div>
</div>
<p>The long form is only needed if you have multiple remotes containing a branch called <code class="docutils literal notranslate"><span class="pre">somefeature</span></code>
(we will learn about multiple remotes in the next episode).</p>
<p>Once we track a remote branch, we can pull from it and push to it:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git pull origin somefeature
<span class="gp">$ </span>git push origin somefeature
</pre></div>
</div>
<p>We can also delete remote branches:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git push origin --delete somefeature
</pre></div>
</div>
</div>
<div class="admonition-creating-pull-requests-from-the-command-line callout admonition" id="callout-1">
<p class="admonition-title">Creating pull requests from the command line</p>
<p>There are several possibilties:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://cli.github.com/">https://cli.github.com/</a></p></li>
<li><p><a class="reference external" href="https://hub.github.com/">https://hub.github.com/</a></p></li>
<li><p><a class="reference external" href="https://github.com/NordicHPC/git-pr">https://github.com/NordicHPC/git-pr</a></p></li>
</ul>
</div>
<div class="admonition-how-you-can-find-out-in-which-repositories-you-are-a-collaborator callout admonition" id="callout-2">
<p class="admonition-title">How you can find out in which repositories you are a collaborator</p>
<p>Visit <a class="reference external" href="https://github.com/settings/repositories">https://github.com/settings/repositories</a> where you will see
an overview of all repositories you have write access to.</p>
</div>
<div class="admonition-github-gitlab-organizations callout admonition" id="callout-3">
<p class="admonition-title">GitHub/GitLab organizations</p>
<ul class="simple">
<li><p>Projects often start under a personal namespace.</p></li>
<li><p>If you want the project to live beyond the interest or work time of one person,
one can share projects under an “organization”.</p></li>
<li><p>You can then invite collaborators to an organization.</p></li>
<li><p>This is what we do in the CodeRefinery project: <a class="reference external" href="https://github.com/coderefinery">https://github.com/coderefinery</a></p></li>
</ul>
</div>
<div class="admonition-keypoints keypoints admonition" id="keypoints-0">
<p class="admonition-title">Keypoints</p>
<ul class="simple">
<li><p>Centralized workflow is often used for remote collaborative work.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">origin</span></code> refers to where you cloned from (but you can relocate it).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">origin/mybranch</span></code> is a read-only pointer to branch <code class="docutils literal notranslate"><span class="pre">mybranch</span></code> on <code class="docutils literal notranslate"><span class="pre">origin</span></code>.</p></li>
<li><p>These read-only pointers only move when you <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">fetch</span></code>/<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code>.</p></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../remotes/" class="btn btn-neutral float-left" title="Concepts around collaboration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../distributed/" class="btn btn-neutral float-right" title="Distributed version control and forking workflow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright CodeRefinery team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>